---
title: "data_visualisation_cultura"
output: html_document
date: "2025-03-11"
---

## Visualizacao de dados.

Tem por obijetivo visualizar os dados, de plantio de culturas como soja, milho, batata,... inivialmente iremos instalar o pacote necessario.

```{r}
install.packages("jsonlite")
```
## Carregar pacotes

```{r jsonlite}
library(jsonlite)
library(dplyr)
```

## Carregar o arquivo.

```{r arquivo_json}

library(jsonlite)
library(dplyr)

# Caminho para o arquivo JSON
arquivo_json <- "/Users/francismaralvesmartinsjunior/Documents/GitHub/farm-tech-solution/farm-tech-solution-r/data/test.json"

# Lendo o arquivo JSON
dados <- fromJSON(arquivo_json)

# Exibindo a estrutura dos dados para entender melhor
str(dados)
```

```{r json-dataframe}
library(jsonlite)
library(dplyr)

# Caminho para o arquivo JSON
arquivo_json <- "/Users/francismaralvesmartinsjunior/Documents/GitHub/farm-tech-solution/farm-tech-solution-r/data/test.json"

# Lendo o arquivo JSON
dados <- fromJSON(arquivo_json)

# Função para processar os dados e extrair as informações de cada insumo
dados_agrupados <- lapply(dados, function(cultura) {
  # Inicializa uma lista para armazenar as informações
  cultura_info <- list(
    tipo_cultura = cultura$tipo,
    area_plantio = cultura$area_plantio
  )
  
  # Para cada tipo de insumo, extraímos as informações de quantidade e variedade
  for (insumo in cultura$insumos) {
    tipo_insumo <- insumo$tipo
    cultura_info[[paste0(tipo_insumo, "_quantidade")]] <- insumo$quantidade
    if ("variedade" %in% names(insumo)) {
      cultura_info[[paste0(tipo_insumo, "_variedade")]] <- insumo$variedade
    } else {
      cultura_info[[paste0(tipo_insumo, "_variedade")]] <- NA
    }
  }
  
  # Convertendo a lista para um data.frame
  return(as.data.frame(cultura_info, stringsAsFactors = FALSE))
})

# Unindo todas as culturas em um único data.frame
df_final <- do.call(rbind, dados_agrupados)

# Exibindo o data.frame final
print(df_final)

```





